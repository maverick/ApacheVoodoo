<!-- $Id$ -->
<TMPL_IF NAME="DEBUG">
<script>
var __YourBrowserIsBroken__ = (navigator.userAgent.toLowerCase().indexOf("msie") != -1);
function vd_toggle (obj, toplevel) {
	obj.parentNode.className = (obj.parentNode.className == "vdOpen") ? 'vdClosed' : 'vdOpen';
	
	// Prevents IE rendering stupidity with layers over select lists
	if (__YourBrowserIsBroken__ && toplevel == 1) {

		var selectState = (obj.parentNode.className == "vdOpen") ? 'hidden': 'visible';
		var selects = document.getElementsByTagName("SELECT");

		for (var i = 0; i < selects.length; i++) {
			selects[i].style.visibility = selectState;
		}
	}
	
	return false;
}
</script>

<style type="text/css" media="all">

.voodooDebug div {
	behavior: url();
}

div.voodooDebug {
	font-family: monospace;
	font-size: 12px;
	background-color: #DDD;
	position: absolute;
	right: 0px;
	z-index: 10000;
	border: 1px solid black;
	border-collapse: collapse;
}

div.voodooDebug div.vdOpen,
div.voodooDebug div.vdClosed {
	border: 1px solid black;
}

div.voodooDebug div.vdOpen div.vdContent {
	display: block;
}

div.voodooDebug div.vdClosed div.vdContent {
	display: none;
}

div.voodooDebug span { 
	font-size: 12px;
	cursor: pointer;
}

div.voodooDebug div { 
	text-align: left;
}

div.voodooDebug>div { 
	text-align: right;
}

div.voodooDebug table {
	border: 1px solid black;
	padding: 5px 0px 5px 0px;
}

div.voodooDebug td {
	border-left: 1px solid black;
}

div.voodooDebug span:before { content: "["; }
div.voodooDebug span:after  { content: "]"; }

div.voodooDebug .vdDepth1  { margin-left:  2em; white-space: pre; }
div.voodooDebug .vdDepth2  { margin-left:  4em; white-space: pre; }
div.voodooDebug .vdDepth3  { margin-left:  5em; white-space: pre; }
div.voodooDebug .vdDepth4  { margin-left:  6em; white-space: pre; }
div.voodooDebug .vdDepth5  { margin-left:  7em; white-space: pre; }
div.voodooDebug .vdDepth6  { margin-left:  8em; white-space: pre; }
div.voodooDebug .vdDepth7  { margin-left: 10em; white-space: pre; }
div.voodooDebug .vdDepth8  { margin-left: 12em; white-space: pre; }
div.voodooDebug .vdDepth9  { margin-left: 14em; white-space: pre; }
div.voodooDebug .vdDepth10 { margin-left: 16em; white-space: pre; }
div.voodooDebug .vdDepth11 { margin-left: 18em; white-space: pre; }
div.voodooDebug .vdDepth12 { margin-left: 20em; white-space: pre; }
div.voodooDebug .vdDepth13 { margin-left: 22em; white-space: pre; }
div.voodooDebug .vdDepth14 { margin-left: 24em; white-space: pre; }
div.voodooDebug .vdDepth15 { margin-left: 26em; white-space: pre; }
</style>

<div class=voodooDebug>
	<div class="vdClosed">
		<span onClick="vd_toggle(this,1);">Debug</span>
		<div class="vdContent">
			<div class="vdClosed">
				<span onClick="vd_toggle(this);">Generation Time</span>
				<div class="vdContent">
					Total Time: <TMPL_VAR generate_time>
					<table>
					<TMPL_LOOP vd_timing>
					<tr>
						<td align=right><tmpl_var time></td>
						<td align=right><tmpl_var percent></td>
						<td align=left ><tmpl_var message></td>
					</tr>
					</TMPL_LOOP>
					</table>
				</div>
			</div>
			<div class="vdClosed">
				<span onClick="vd_toggle(this);">Debug Trace</span>
				<div class="vdContent">
					<table>
					<TMPL_LOOP vd_debug>
					<tr>
						<td><div class="vdDepth<TMPL_VAR depth>"><TMPL_VAR name></div></td>
					</tr>
					</TMPL_LOOP>
					</table>
				</div>
			</div>
			<div class="vdClosed">
				<span onClick="vd_toggle(this);">Template Variables</span>
				<div class="vdContent">
					<pre><TMPL_VAR vd_template></pre>
				</div>
			</div>
			<div class="vdClosed">
				<span onClick="vd_toggle(this);">Session Variables</span>
				<div class="vdContent">
					<pre><TMPL_VAR vd_session></pre>
				</div>
			</div>
			<div class="vdClosed">
				<span onClick="vd_toggle(this);">Config Variables</span>
				<div class="vdContent">
					<pre><TMPL_VAR vd_conf></pre>
				</div>
			</div>
		</div>
	</div>
</div>
<TMPL_ELSE>
	<!-- Generation time: <tmpl_var generate_time> -->
</TMPL_IF>
